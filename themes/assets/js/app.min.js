var yii=yii||{};
yii.app=function(c){var e={},g={},l=c(".main-mask"),h=0,n=function(a,b,f){var d=[],m=1;c.each(a,function(a,b){m?m=0:d.push(b)});d.length?yii.app.doIfReferenceExists(d,b,f):b(f)},p=c("#global-error");return{isActive:!1,westContent:"",northContent:"",centerContent:"",southContent:"",reference:{},getDialogForm:function(a,b){return"undefined"!==typeof e[a]&&"undefined"!==typeof e[a][b]?e[a][b]:c("#blank")},init:function(){c.ajaxSetup({error:function(a){yii.app.showError(a)}});using("accordion layout menu menubutton linkbutton tabs messager".split(" "),function(){c("body").layout({fit:!0,
border:!1}).layout("add",{region:"north",content:yii.app.northContent,collapsible:!1,height:40}).layout("add",{title:"Navigation",region:"west",iconCls:"icon-compass",split:!0,width:200,content:yii.app.westContent,hideCollapsedContent:!1,onCollapse:function(){yii.app.cookie.set("west-collapsed",1)},onExpand:function(){yii.app.cookie.set("west-collapsed",0)}}).layout("add",{region:"south",content:yii.app.southContent}).layout("add",{region:"center",content:yii.app.centerContent});delete yii.app.northContent;
delete yii.app.westContent;delete yii.app.southContent;delete yii.app.centerContent;~~yii.app.cookie.get("west-collapsed")&&c("body").layout("collapse","west");c("#north-user-menu-item").menu({}).menu("appendItem",{text:"Profile",iconCls:"icon-profile",onclick:function(a){yii.app.createTab("Profile",yii.app.profileUrl,"icon-profile","nav-profile");a.stopPropagation()}}).menu("appendItem",{separator:!0}).menu("appendItem",{text:"Logout",iconCls:"icon-door-out",onclick:function(a){yii.handleAction(c('<a href="'+
yii.app.logoutUrl+'" data-method="post"></a>'));a.stopPropagation()}});c("#north-user-menu").menubutton({menu:"#north-user-menu-item"});var a=c("#navigation"),b;a.accordion({border:!1,fit:!0});c.each(yii.app.navItem,function(b,d){("undefined"===typeof d.visible||d.visible)&&a.accordion("add",d)});c.each(c(".nav-btn"),function(a,b){c(b).linkbutton({toggle:!0,group:"g1",iconCls:b.dataset.icon,onClick:function(){yii.app.showMainMask();yii.app.createTab(b.dataset.tabtitle,b.dataset.url,b.dataset.icon,
b.id)}})});g=c("#maintab");g.tabs({fit:!0,border:!1,onSelect:function(b,d){var c=g.tabs("getSelected").panel("options"),e=document.getElementById(c.data.nav);window.history.pushState("","",c.data.url);document.title=b;"undefined"!==typeof e&&e&&!e.classList.contains("l-btn-selected")&&(a.find(".l-btn-selected").removeClass("l-btn-selected"),e.classList.add("l-btn-selected"),a.accordion("select",e.dataset.accordion))}});"undefined"!==typeof yii.app.tabOptions?(yii.app.createTab(yii.app.tabOptions.tabtitle,
yii.app.tabOptions.url,yii.app.tabOptions.icon,yii.app.selectedNav),delete yii.app.tabOptions):(b=document.getElementById(yii.app.selectedNav),"undefined"!==typeof b&&b?yii.app.createTab(b.dataset.tabtitle,b.dataset.url,b.dataset.icon,yii.app.selectedNav):c.messager.alert("Error","Navigation not found","error"));delete yii.app.selectedNav;b=null;"undefined"!==typeof yii.app.errors&&c.messager.alert("Error",yii.app.errors,"error");delete yii.app.errors})},createTab:function(a,b,c,d){g.tabs("exists",
a)?(yii.app.hideMainMask(),g.tabs("select",a)):g.tabs("add",{title:a,href:b,closable:!0,iconCls:c,data:{nav:d,url:b}})},showGridMsg:function(a,b){var f=c(a).datagrid("getPanel").children("div.datagrid-view");b.rows.length?f.children("div.datagrid-empty").remove():c('<div class="datagrid-empty"></div>').html("No Records Found").appendTo(f).css({position:"absolute",left:0,top:50,width:"100%",textAlign:"center"})},showError:function(a){var b="undefined"!==typeof a.responseText?a.responseText:a;if("object"===
typeof b){var f=[];c.each(b,function(a,b){f.push(b)});b=f.join(", ")}using("dialog",function(){p.dialog({title:"Error",modal:!0,minWidth:300,minHeight:200,maxWidth:window.innerWidth-50,maxHeight:window.innerHeight-50,content:b})})},doIfReferenceExists:function(a,b,f){"undefined"!==typeof a[0]&&"undefined"===typeof yii.app.reference[a[0]]?c.ajax({url:yii.app.getReferenceUrl,data:{type:a[0]},dataType:"json",success:function(c){yii.app.reference[a[0]]=c;n(a,b,f)}}):n(a,b,f)},dateBoxFormatter:function(a){var b=
a.getFullYear(),c=a.getMonth()+1;a=a.getDate();return(10>a?"0"+a:a)+"-"+(10>c?"0"+c:c)+"-"+b},dateBoxParser:function(a){if(!a)return new Date;var b=a.split("-");a=parseInt(b[0],10);var c=parseInt(b[1],10),b=parseInt(b[2],10);return isNaN(a)||isNaN(c)||isNaN(b)?new Date:new Date(b,c-1,a)},formOptionsOnCreateAjaxDialogForm:{},createAjaxDialogForm:function(a,b,f,d){d=d||{};yii.app.formOptionsOnCreateAjaxDialogForm=d;"undefined"===typeof e[a]&&(e[a]={});"undefined"===typeof e[a][b]?(f=c.extend(!0,{title:b,
closed:!0,modal:!0,width:500,height:400,buttons:[{iconCls:"icon-disk",text:"Save",handler:function(){}},{iconCls:"icon-cancel",text:"Cancel",handler:function(){e[a][b].dialog("close")}}],onLoad:function(){"undefined"!==typeof d&&"undefined"!==typeof d.loadData&&c("#"+b).form("load",d.loadData)}},f),window.innerHeight-20<f.height&&(f.height=window.innerHeight-20),using("dialog",function(){e[a][b]=c("<div></div>").dialog(f)})):using("form",function(){e[a][b].children().form("clear");"undefined"!==typeof d&&
"undefined"!==typeof d.loadData&&e[a][b].children().form("load",d.loadData);yii.refreshCsrfToken()});e[a][b].dialog("open");return!0},deleteHandler:function(a,b,f,d,e){var g=a.datagrid("getChecked");g.length?using("messager",function(){c.messager.confirm("Delete Confirmation","Are you sure to delete the checked rows?",function(h){if(h){f=f||"id";d=d||"ids";e=e||{};e.doAfterDelete=e.doAfterDelete||function(b){"undefined"!==typeof b.list?a.datagrid("loadData",b.list):a.datagrid("reload")};var k={};
h=a.datagrid("options");k.rows=h.pageSize;k.page=h.pageNumber;k[d]=[];c.each(g,function(a,b){k[d].push(b[f])});"undefined"!==typeof e.doBeforeDelete&&e.doBeforeDelete(k);c.ajax({url:b,type:"post",dataType:"json",data:k,success:function(a){yii.refreshCsrfToken();e.doAfterDelete(a)}})}})}):c.messager.alert("Attention","Must checked the record will be delete","warning")},defaults:{validatebox:{minLength:function(){using("validatebox",function(){"undefined"===typeof c.fn.validatebox.defaults.rules.minLength&&
(c.fn.validatebox.defaults.rules.minLength={validator:function(a,b){return a.length>=b[0]},message:"Please enter at least {0} characters."})})},equals:function(){using("validatebox",function(){"undefined"===typeof c.fn.validatebox.defaults.rules.equals&&(c.fn.validatebox.defaults.rules.equals={validator:function(a,b){return a===c(b[0]).val()},message:"Field do not match."})})}},pagination:{displayMsg:function(a){a=a||"{from} - {to} of {total}";"reset"===a&&(a="Displaying {from} to {to} of {total} items");
using("pagination",function(){c.fn.pagination.defaults.displayMsg=a})},last:function(){using("pagination",function(){c.fn.pagination.defaults.last={}})}}},getMainTab:function(){return g},defaultDgOptions:{fit:!0,striped:!0,border:!1,method:"get",rownumbers:!0,pagination:!0,checkOnSelect:!1,selectOnCheck:!1,singleSelect:!0,onLoadError:function(a){yii.app.showError(a)}},showMainMask:function(){h++;1===h&&l.css("display","block")},hideMainMask:function(){0<h&&h--;0===h&&l.css("display","none")},cookie:{set:function(a,
b,c,d){c=c||1;d=d||"";var e="";c&&(e=new Date,e.setTime(e.getTime()+864E5*c),e="; expires="+e.toGMTString());document.cookie=a+"="+b+e+"; path=/"+d},get:function(a){a+="=";for(var b=document.cookie.split(";"),c=0;c<b.length;c++){for(var d=b[c];" "===d.charAt(0);)d=d.substring(1,d.length);if(0===d.indexOf(a))return d.substring(a.length,d.length)}return null},"delete":function(a,b){yii.app.cookie.set(a,"",-1,b)}}}}(jQuery);